!function(t){"function"==typeof define&&define.amd?define(t):t()}(function(){"use strict";var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function t(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var u=function(){return(u=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function e(t,a,s,u){return new(s=s||Promise)(function(r,e){function n(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?r(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(n,o)}i((u=u.apply(t,a||[])).next())})}function v(r,n){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(r,s)}catch(t){e=[6,t],i=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var r=(o.prototype.addChild=function(t){t.appendToParent(this.parent),this.elements.push(t)},o.prototype.isMobile=function(){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|android|silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[23]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(navigator.userAgent.slice(0,4))},o);function o(t){this.elements=[],this.context=null,this.nonce=null,this.parent=t.element}var i=(a.prototype.attachHandler=function(t,e){this.ref.addEventListener(t,e)},a.prototype.appendToParent=function(t){t.appendChild(this.ref)},a.prototype.destroy=function(){this.ref.parentNode.removeChild(this.ref)},a);function a(t){this.ref=this.render(t)}var s,c=(t(f,s=i),f.prototype.render=function(t){var e=this,r=document.createElement("button");return r.addEventListener("click",function(){return window.open(e.options.href)}),r.type="button",r.style.cssText="width: 100%; min-width: 288px; height: 40px;\n      display: flex; align-items: center; justify-content: center; border: none; border-radius: 20px;\n      font-family: SF Pro Text, sans-serif; font-style: normal; font-weight: 500; font-size: 14px; color: #030303;\n      text-decoration: none; background-color: #fff;",r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="#030303"><path d="M4.16 8.322a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776L9.108.368c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776L5.052 7.95a1.25 1.25 0 0 1-.891.371zm7.116-1.286a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l1.662-1.657c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-1.675 1.67a1.24 1.24 0 0 1-.878.358zm-7.154 7.132a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l4.242-4.23c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-4.242 4.23a1.23 1.23 0 0 1-.891.371zm2.9 2.877a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l1.795-1.8c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-1.795 1.8c-.24.252-.56.37-.9.37zm4.708-4.695a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l4.1-4.096c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-4.1 4.096c-.24.252-.56.37-.9.37zM1.25 11.2A1.25 1.25 0 0 0 2.5 9.965a1.25 1.25 0 1 0-2.5 0 1.25 1.25 0 0 0 1.25 1.246zM9.906 20a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l5.944-5.925c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-5.944 5.926a1.25 1.25 0 0 1-.891.371zm8.844-8.815a1.25 1.25 0 1 0-1.25-1.246 1.25 1.25 0 0 0 1.25 1.246z"/></svg><span style="margin-left: 10px;">'+t.title+"</span>",r},f.prototype.update=function(t){this.options.href=t},f);function f(t){var e=s.call(this,t)||this;return e.options=t,e}function l(t,e){return t(e={exports:{}},e.exports),e.exports}var h,w,d,p,g,y=l(function(t,e){var r=function(){function i(t,e){function a(t,e){f=function(t){for(var e=new Array(t),r=0;r<t;r+=1){e[r]=new Array(t);for(var n=0;n<t;n+=1)e[r][n]=null}return e}(l=4*s+17),r(0,0),r(l-7,0),r(0,l-7),i(),o(),p(t,e),7<=s&&h(t),null==n&&(n=y(s,u,c)),g(n,e)}var s=t,u=w[e],f=null,l=0,n=null,c=[],d={},r=function(t,e){for(var r=-1;r<=7;r+=1)if(!(t+r<=-1||l<=t+r))for(var n=-1;n<=7;n+=1)e+n<=-1||l<=e+n||(f[t+r][e+n]=0<=r&&r<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=n&&n<=4)},o=function(){for(var t=8;t<l-8;t+=1)null==f[t][6]&&(f[t][6]=t%2==0);for(var e=8;e<l-8;e+=1)null==f[6][e]&&(f[6][e]=e%2==0)},i=function(){for(var t=b.getPatternPosition(s),e=0;e<t.length;e+=1)for(var r=0;r<t.length;r+=1){var n=t[e],o=t[r];if(null==f[n][o])for(var i=-2;i<=2;i+=1)for(var a=-2;a<=2;a+=1)f[n+i][o+a]=-2==i||2==i||-2==a||2==a||0==i&&0==a}},h=function(t){for(var e=b.getBCHTypeNumber(s),r=0;r<18;r+=1){var n=!t&&1==(e>>r&1);f[Math.floor(r/3)][r%3+l-8-3]=n}for(r=0;r<18;r+=1){n=!t&&1==(e>>r&1);f[r%3+l-8-3][Math.floor(r/3)]=n}},p=function(t,e){for(var r=u<<3|e,n=b.getBCHTypeInfo(r),o=0;o<15;o+=1){var i=!t&&1==(n>>o&1);o<6?f[o][8]=i:o<8?f[o+1][8]=i:f[l-15+o][8]=i}for(o=0;o<15;o+=1){i=!t&&1==(n>>o&1);o<8?f[8][l-o-1]=i:o<9?f[8][15-o-1+1]=i:f[8][15-o-1]=i}f[l-8][8]=!t},g=function(t,e){for(var r=-1,n=l-1,o=7,i=0,a=b.getMaskFunction(e),s=l-1;0<s;s-=2)for(6==s&&--s;;){for(var u,c=0;c<2;c+=1){null==f[n][s-c]&&(u=!1,i<t.length&&(u=1==(t[i]>>>o&1)),a(n,s-c)&&(u=!u),f[n][s-c]=u,-1==--o&&(i+=1,o=7))}if((n+=r)<0||l<=n){n-=r,r=-r;break}}},y=function(t,e,r){for(var n=L.getRSBlocks(t,e),o=S(),i=0;i<r.length;i+=1){var a=r[i];o.put(a.getMode(),4),o.put(a.getLength(),b.getLengthInBits(a.getMode(),t)),a.write(o)}for(var s=0,i=0;i<n.length;i+=1)s+=n[i].dataCount;if(o.getLengthInBits()>8*s)throw"code length overflow. ("+o.getLengthInBits()+">"+8*s+")";for(o.getLengthInBits()+4<=8*s&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*s||(o.put(236,8),o.getLengthInBits()>=8*s));)o.put(17,8);return function(t,e){for(var r=0,n=0,o=0,i=new Array(e.length),a=new Array(e.length),s=0;s<e.length;s+=1){var u=e[s].dataCount,c=e[s].totalCount-u,n=Math.max(n,u),o=Math.max(o,c);i[s]=new Array(u);for(var f=0;f<i[s].length;f+=1)i[s][f]=255&t.getBuffer()[f+r];r+=u;var l=b.getErrorCorrectPolynomial(c),h=m(i[s],l.getLength()-1).mod(l);a[s]=new Array(l.getLength()-1);for(f=0;f<a[s].length;f+=1){var d=f+h.getLength()-a[s].length;a[s][f]=0<=d?h.getAt(d):0}}for(var p=0,f=0;f<e.length;f+=1)p+=e[f].totalCount;for(var g=new Array(p),y=0,f=0;f<n;f+=1)for(s=0;s<e.length;s+=1)f<i[s].length&&(g[y]=i[s][f],y+=1);for(f=0;f<o;f+=1)for(s=0;s<e.length;s+=1)f<a[s].length&&(g[y]=a[s][f],y+=1);return g}(o,n)};d.addData=function(t,e){var r=null;switch(e=e||"Byte"){case"Numeric":r=C(t);break;case"Alphanumeric":r=B(t);break;case"Byte":r=M(t);break;case"Kanji":r=D(t);break;default:throw"mode:"+e}c.push(r),n=null},d.isDark=function(t,e){if(t<0||l<=t||e<0||l<=e)throw t+","+e;return f[t][e]},d.getModuleCount=function(){return l},d.make=function(){if(s<1){for(var t=1;t<40;t++){for(var e=L.getRSBlocks(t,u),r=S(),n=0;n<c.length;n++){var o=c[n];r.put(o.getMode(),4),r.put(o.getLength(),b.getLengthInBits(o.getMode(),t)),o.write(r)}for(var i=0,n=0;n<e.length;n++)i+=e[n].dataCount;if(r.getLengthInBits()<=8*i)break}s=t}a(!1,function(){for(var t=0,e=0,r=0;r<8;r+=1){a(!0,r);var n=b.getLostPoint(d);(0==r||n<t)&&(t=n,e=r)}return e}())},d.createTableTag=function(t,e){t=t||2;var r="";r+='<table style="',r+=" border-width: 0px; border-style: none;",r+=" border-collapse: collapse;",r+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",r+='">',r+="<tbody>";for(var n=0;n<d.getModuleCount();n+=1){r+="<tr>";for(var o=0;o<d.getModuleCount();o+=1)r+='<td style="',r+=" border-width: 0px; border-style: none;",r+=" border-collapse: collapse;",r+=" padding: 0px; margin: 0px;",r+=" width: "+t+"px;",r+=" height: "+t+"px;",r+=" background-color: ",r+=d.isDark(n,o)?"#000000":"#ffffff",r+=";",r+='"/>';r+="</tr>"}return r+="</tbody>",r+="</table>"},d.createSvgTag=function(t,e,r,n){var o={};"object"==typeof arguments[0]&&(t=(o=arguments[0]).cellSize,e=o.margin,r=o.alt,n=o.title),t=t||2,e=void 0===e?4*t:e,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-description":null,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-title":null;var i,a,s,u=d.getModuleCount()*t+2*e,c="",f="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ";for(c+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',c+=o.scalable?"":' width="'+u+'px" height="'+u+'px"',c+=' viewBox="0 0 '+u+" "+u+'" ',c+=' preserveAspectRatio="xMinYMin meet"',c+=n.text||r.text?' role="img" aria-labelledby="'+v([n.id,r.id].join(" ").trim())+'"':"",c+=">",c+=n.text?'<title id="'+v(n.id)+'">'+v(n.text)+"</title>":"",c+=r.text?'<description id="'+v(r.id)+'">'+v(r.text)+"</description>":"",c+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',c+='<path d="',a=0;a<d.getModuleCount();a+=1)for(s=a*t+e,i=0;i<d.getModuleCount();i+=1)d.isDark(a,i)&&(c+="M"+(i*t+e)+","+s+f);return c+='" stroke="transparent" fill="black"/>',c+="</svg>"},d.createDataURL=function(o,t){o=o||2,t=void 0===t?4*o:t;var e=d.getModuleCount()*o+2*t,i=t,a=e-t;return P(e,e,function(t,e){if(i<=t&&t<a&&i<=e&&e<a){var r=Math.floor((t-i)/o),n=Math.floor((e-i)/o);return d.isDark(n,r)?0:1}return 1})},d.createImgTag=function(t,e,r){t=t||2,e=void 0===e?4*t:e;var n=d.getModuleCount()*t+2*e,o="";return o+="<img",o+=' src="',o+=d.createDataURL(t,e),o+='"',o+=' width="',o+=n,o+='"',o+=' height="',o+=n,o+='"',r&&(o+=' alt="',o+=v(r),o+='"'),o+="/>"};var v=function(t){for(var e="",r=0;r<t.length;r+=1){var n=t.charAt(r);switch(n){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=n}}return e};return d.createASCII=function(t,e){if((t=t||1)<2)return function(t){t=void 0===t?2:t;for(var e,r,n,o,i=+d.getModuleCount()+2*t,a=t,s=i-t,u={"██":"█","█ ":"▀"," █":"▄","  ":" "},c={"██":"▀","█ ":"▀"," █":" ","  ":" "},f="",l=0;l<i;l+=2){for(r=Math.floor(l-a),n=Math.floor(l+1-a),e=0;e<i;e+=1)o="█",a<=e&&e<s&&a<=l&&l<s&&d.isDark(r,Math.floor(e-a))&&(o=" "),a<=e&&e<s&&a<=l+1&&l+1<s&&d.isDark(n,Math.floor(e-a))?o+=" ":o+="█",f+=t<1&&s<=l+1?c[o]:u[o];f+="\n"}return i%2&&0<t?f.substring(0,f.length-i-1)+Array(1+i).join("▀"):f.substring(0,f.length-1)}(e);--t,e=void 0===e?2*t:e;for(var r,n,o,i=d.getModuleCount()*t+2*e,a=e,s=i-e,u=Array(t+1).join("██"),c=Array(t+1).join("  "),f="",l="",h=0;h<i;h+=1){for(n=Math.floor((h-a)/t),l="",r=0;r<i;r+=1)o=1,a<=r&&r<s&&a<=h&&h<s&&d.isDark(n,Math.floor((r-a)/t))&&(o=0),l+=o?u:c;for(n=0;n<t;n+=1)f+=l+"\n"}return f.substring(0,f.length-1)},d.renderTo2dContext=function(t,e){e=e||2;for(var r=d.getModuleCount(),n=0;n<r;n++)for(var o=0;o<r;o++)t.fillStyle=d.isDark(n,o)?"black":"white",t.fillRect(n*e,o*e,e,e)},d}i.stringToBytes=(i.stringToBytesFuncs={default:function(t){for(var e=[],r=0;r<t.length;r+=1){var n=t.charCodeAt(r);e.push(255&n)}return e}}).default,i.createStringToBytes=function(s,u){var i=function(){for(var e=E(s),t=function(){var t=e.read();if(-1==t)throw"eof";return t},r=0,n={};;){var o=e.read();if(-1==o)break;var i=t(),a=t()<<8|t();n[String.fromCharCode(o<<8|i)]=a,r+=1}if(r!=u)throw r+" != "+u;return n}(),a="?".charCodeAt(0);return function(t){for(var e=[],r=0;r<t.length;r+=1){var n,o=t.charCodeAt(r);o<128?e.push(o):"number"==typeof(n=i[t.charAt(r)])?(255&n)==n?e.push(n):(e.push(n>>>8),e.push(255&n)):e.push(a)}return e}};var e,t,a=1,s=2,o=4,u=8,w={L:1,M:0,Q:3,H:2},r=0,n=1,c=2,f=3,l=4,h=5,d=6,p=7,b=(e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],(t={}).getBCHTypeInfo=function(t){for(var e=t<<10;0<=g(e)-g(1335);)e^=1335<<g(e)-g(1335);return 21522^(t<<10|e)},t.getBCHTypeNumber=function(t){for(var e=t<<12;0<=g(e)-g(7973);)e^=7973<<g(e)-g(7973);return t<<12|e},t.getPatternPosition=function(t){return e[t-1]},t.getMaskFunction=function(t){switch(t){case r:return function(t,e){return(t+e)%2==0};case n:return function(t,e){return t%2==0};case c:return function(t,e){return e%3==0};case f:return function(t,e){return(t+e)%3==0};case l:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case h:return function(t,e){return t*e%2+t*e%3==0};case d:return function(t,e){return(t*e%2+t*e%3)%2==0};case p:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw"bad maskPattern:"+t}},t.getErrorCorrectPolynomial=function(t){for(var e=m([1],0),r=0;r<t;r+=1)e=e.multiply(m([1,y.gexp(r)],0));return e},t.getLengthInBits=function(t,e){if(1<=e&&e<10)switch(t){case a:return 10;case s:return 9;case o:case u:return 8;default:throw"mode:"+t}else if(e<27)switch(t){case a:return 12;case s:return 11;case o:return 16;case u:return 10;default:throw"mode:"+t}else{if(!(e<41))throw"type:"+e;switch(t){case a:return 14;case s:return 13;case o:return 16;case u:return 12;default:throw"mode:"+t}}},t.getLostPoint=function(t){for(var e=t.getModuleCount(),r=0,n=0;n<e;n+=1)for(var o=0;o<e;o+=1){for(var i=0,a=t.isDark(n,o),s=-1;s<=1;s+=1)if(!(n+s<0||e<=n+s))for(var u=-1;u<=1;u+=1)o+u<0||e<=o+u||0==s&&0==u||a==t.isDark(n+s,o+u)&&(i+=1);5<i&&(r+=3+i-5)}for(n=0;n<e-1;n+=1)for(o=0;o<e-1;o+=1){var c=0;t.isDark(n,o)&&(c+=1),t.isDark(n+1,o)&&(c+=1),t.isDark(n,o+1)&&(c+=1),t.isDark(n+1,o+1)&&(c+=1),0!=c&&4!=c||(r+=3)}for(n=0;n<e;n+=1)for(o=0;o<e-6;o+=1)t.isDark(n,o)&&!t.isDark(n,o+1)&&t.isDark(n,o+2)&&t.isDark(n,o+3)&&t.isDark(n,o+4)&&!t.isDark(n,o+5)&&t.isDark(n,o+6)&&(r+=40);for(o=0;o<e;o+=1)for(n=0;n<e-6;n+=1)t.isDark(n,o)&&!t.isDark(n+1,o)&&t.isDark(n+2,o)&&t.isDark(n+3,o)&&t.isDark(n+4,o)&&!t.isDark(n+5,o)&&t.isDark(n+6,o)&&(r+=40);for(var f=0,o=0;o<e;o+=1)for(n=0;n<e;n+=1)t.isDark(n,o)&&(f+=1);return r+=Math.abs(100*f/e/e-50)/5*10},t);function g(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e}var y=function(){for(var e=new Array(256),r=new Array(256),t=0;t<8;t+=1)e[t]=1<<t;for(t=8;t<256;t+=1)e[t]=e[t-4]^e[t-5]^e[t-6]^e[t-8];for(t=0;t<255;t+=1)r[e[t]]=t;var n={glog:function(t){if(t<1)throw"glog("+t+")";return r[t]},gexp:function(t){for(;t<0;)t+=255;for(;256<=t;)t-=255;return e[t]}};return n}();function m(n,o){if(void 0===n.length)throw n.length+"/"+o;var e=function(){for(var t=0;t<n.length&&0==n[t];)t+=1;for(var e=new Array(n.length-t+o),r=0;r<n.length-t;r+=1)e[r]=n[r+t];return e}(),i={getAt:function(t){return e[t]},getLength:function(){return e.length},multiply:function(t){for(var e=new Array(i.getLength()+t.getLength()-1),r=0;r<i.getLength();r+=1)for(var n=0;n<t.getLength();n+=1)e[r+n]^=y.gexp(y.glog(i.getAt(r))+y.glog(t.getAt(n)));return m(e,0)},mod:function(t){if(i.getLength()-t.getLength()<0)return i;for(var e=y.glog(i.getAt(0))-y.glog(t.getAt(0)),r=new Array(i.getLength()),n=0;n<i.getLength();n+=1)r[n]=i.getAt(n);for(n=0;n<t.getLength();n+=1)r[n]^=y.gexp(y.glog(t.getAt(n))+e);return m(r,0).mod(t)}};return i}function v(){var r=[],o={writeByte:function(t){r.push(255&t)},writeShort:function(t){o.writeByte(t),o.writeByte(t>>>8)},writeBytes:function(t,e,r){e=e||0,r=r||t.length;for(var n=0;n<r;n+=1)o.writeByte(t[n+e])},writeString:function(t){for(var e=0;e<t.length;e+=1)o.writeByte(t.charCodeAt(e))},toByteArray:function(){return r},toString:function(){var t="";t+="[";for(var e=0;e<r.length;e+=1)0<e&&(t+=","),t+=r[e];return t+="]"}};return o}function x(){function r(t){a+=String.fromCharCode(e(63&t))}var n=0,o=0,i=0,a="",t={},e=function(t){if(!(t<0)){if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw"n:"+t};return t.writeByte=function(t){for(n=n<<8|255&t,o+=8,i+=1;6<=o;)r(n>>>o-6),o-=6},t.flush=function(){if(0<o&&(r(n<<6-o),o=n=0),i%3!=0)for(var t=3-i%3,e=0;e<t;e+=1)a+="="},t.toString=function(){return a},t}function k(t,e){var n=t,o=e,p=new Array(t*e),r={setPixel:function(t,e,r){p[e*n+t]=r},write:function(t){t.writeString("GIF87a"),t.writeShort(n),t.writeShort(o),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(n),t.writeShort(o),t.writeByte(0);var e=i(2);t.writeByte(2);for(var r=0;255<e.length-r;)t.writeByte(255),t.writeBytes(e,r,255),r+=255;t.writeByte(e.length-r),t.writeBytes(e,r,e.length-r),t.writeByte(0),t.writeString(";")}},i=function(t){for(var e=1<<t,r=1+(1<<t),n=t+1,o=g(),i=0;i<e;i+=1)o.add(String.fromCharCode(i));o.add(String.fromCharCode(e)),o.add(String.fromCharCode(r));var a,s,u,c=v(),f=(a=c,u=s=0,{write:function(t,e){if(t>>>e!=0)throw"length over";for(;8<=s+e;)a.writeByte(255&(t<<s|u)),e-=8-s,t>>>=8-s,s=u=0;u|=t<<s,s+=e},flush:function(){0<s&&a.writeByte(u)}});f.write(e,n);var l=0,h=String.fromCharCode(p[l]);for(l+=1;l<p.length;){var d=String.fromCharCode(p[l]);l+=1,o.contains(h+d)?h+=d:(f.write(o.indexOf(h),n),o.size()<4095&&(o.size()==1<<n&&(n+=1),o.add(h+d)),h=d)}return f.write(o.indexOf(h),n),f.write(r,n),f.flush(),c.toByteArray()},g=function(){var e={},r=0,n={add:function(t){if(n.contains(t))throw"dup key:"+t;e[t]=r,r+=1},size:function(){return r},indexOf:function(t){return e[t]},contains:function(t){return void 0!==e[t]}};return n};return r}var A,T,L=(A=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],(T={}).getRSBlocks=function(t,e){var r=function(t,e){switch(e){case w.L:return A[4*(t-1)+0];case w.M:return A[4*(t-1)+1];case w.Q:return A[4*(t-1)+2];case w.H:return A[4*(t-1)+3];default:return}}(t,e);if(void 0===r)throw"bad rs block @ typeNumber:"+t+"/errorCorrectionLevel:"+e;for(var n,o,i=r.length/3,a=[],s=0;s<i;s+=1)for(var u=r[3*s+0],c=r[3*s+1],f=r[3*s+2],l=0;l<u;l+=1)a.push((n=f,o=void 0,(o={}).totalCount=c,o.dataCount=n,o));return a},T),S=function(){var r=[],n=0,o={getBuffer:function(){return r},getAt:function(t){var e=Math.floor(t/8);return 1==(r[e]>>>7-t%8&1)},put:function(t,e){for(var r=0;r<e;r+=1)o.putBit(1==(t>>>e-r-1&1))},getLengthInBits:function(){return n},putBit:function(t){var e=Math.floor(n/8);r.length<=e&&r.push(0),t&&(r[e]|=128>>>n%8),n+=1}};return o},C=function(t){var e=a,n=t,r={getMode:function(){return e},getLength:function(t){return n.length},write:function(t){for(var e=n,r=0;r+2<e.length;)t.put(o(e.substring(r,r+3)),10),r+=3;r<e.length&&(e.length-r==1?t.put(o(e.substring(r,r+1)),4):e.length-r==2&&t.put(o(e.substring(r,r+2)),7))}},o=function(t){for(var e=0,r=0;r<t.length;r+=1)e=10*e+i(t.charAt(r));return e},i=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+t};return r},B=function(t){var e=s,n=t,r={getMode:function(){return e},getLength:function(t){return n.length},write:function(t){for(var e=n,r=0;r+1<e.length;)t.put(45*o(e.charAt(r))+o(e.charAt(r+1)),11),r+=2;r<e.length&&t.put(o(e.charAt(r)),6)}},o=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);if("A"<=t&&t<="Z")return t.charCodeAt(0)-"A".charCodeAt(0)+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return r},M=function(t){var e=o,r=i.stringToBytes(t),n={getMode:function(){return e},getLength:function(t){return r.length},write:function(t){for(var e=0;e<r.length;e+=1)t.put(r[e],8)}};return n},D=function(t){var e=u,r=i.stringToBytesFuncs.SJIS;if(!r)throw"sjis not supported.";!function(){var t=r("友");if(2!=t.length||38726!=(t[0]<<8|t[1]))throw"sjis not supported."}();var o=r(t),n={getMode:function(){return e},getLength:function(t){return~~(o.length/2)},write:function(t){for(var e=o,r=0;r+1<e.length;){var n=(255&e[r])<<8|255&e[r+1];if(33088<=n&&n<=40956)n-=33088;else{if(!(57408<=n&&n<=60351))throw"illegal char at "+(r+1)+"/"+n;n-=49472}n=192*(n>>>8&255)+(255&n),t.put(n,13),r+=2}if(r<e.length)throw"illegal char at "+(r+1)}};return n},E=function(t){var r=t,n=0,o=0,i=0,e={read:function(){for(;i<8;){if(n>=r.length){if(0==i)return-1;throw"unexpected end of file./"+i}var t=r.charAt(n);if(n+=1,"="==t)return i=0,-1;t.match(/^\s$/)||(o=o<<6|a(t.charCodeAt(0)),i+=6)}var e=o>>>i-8&255;return i-=8,e}},a=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw"c:"+t};return e},P=function(t,e,r){for(var n=k(t,e),o=0;o<e;o+=1)for(var i=0;i<t;i+=1)n.setPixel(i,o,r(i,o));var a=v();n.write(a);for(var s=x(),u=a.toByteArray(),c=0;c<u.length;c+=1)s.writeByte(u[c]);return s.flush(),"data:image/gif;base64,"+s};return i}();r.stringToBytesFuncs["UTF-8"]=function(t){return function(t){for(var e=[],r=0;r<t.length;r++){var n=t.charCodeAt(r);n<128?e.push(n):n<2048?e.push(192|n>>6,128|63&n):n<55296||57344<=n?e.push(224|n>>12,128|n>>6&63,128|63&n):(r++,n=65536+((1023&n)<<10|1023&t.charCodeAt(r)),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return e}(t)},t.exports=r}),b='\n    <div ownid-pending style="display:none; position: absolute;top: 0;background: rgba(255,255,255,.95);width: 100%;height: 100%;flex-direction: column;justify-content: space-around;align-items: center;">\n      <div>\n        <div style="height:40px;display: flex;justify-content: center;align-items: center;">\n          <svg style="-webkit-animation:spin 1.77s ease infinite;-moz-animation:spin 1.77s ease infinite;animation:spin 1.77s ease infinite;" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="#030303"><path d="M4.16 8.322a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776L9.108.368c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776L5.052 7.95a1.25 1.25 0 0 1-.891.371zm7.116-1.286a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l1.662-1.657c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-1.675 1.67a1.24 1.24 0 0 1-.878.358zm-7.154 7.132a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l4.242-4.23c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-4.242 4.23a1.23 1.23 0 0 1-.891.371zm2.9 2.877a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l1.795-1.8c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-1.795 1.8c-.24.252-.56.37-.9.37zm4.708-4.695a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l4.1-4.096c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-4.1 4.096c-.24.252-.56.37-.9.37zM1.25 11.2A1.25 1.25 0 0 0 2.5 9.965a1.25 1.25 0 1 0-2.5 0 1.25 1.25 0 0 0 1.25 1.246zM9.906 20a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l5.944-5.925c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-5.944 5.926a1.25 1.25 0 0 1-.891.371zm8.844-8.815a1.25 1.25 0 1 0-1.25-1.246 1.25 1.25 0 0 0 1.25 1.246z"></path></svg>\n        </div>\n        <div style="font-weight: bold">Loading...</div>\n      </div>\n      <button ownid-btn="cancel">Cancel</button>\n    </div>',m=(t(x,h=i),x.prototype.render=function(t){var e=document.createElement("div");return e.style.position="relative",document.getElementById("OwnID-styles")||this.addOwnIDStyleTag("OwnID-styles"),e.innerHTML='\n      <div style="display:flex;padding:15px;background:#fff;border-radius:10px">\n        <div class="own-id-qr-code" style="margin-right:25px">'+this.generateQRCode(t.href)+'</div><div style="display:flex;flex-direction:column;justify-content:space-between;flex:1;"><div><div style="font-family:\'SF Compact Text\',sans-serif;font-weight:bold;font-size:20px;line-height:32px;margin-bottom:4px;">'+t.title+"</div><div style=\"font-family:'SF Compact Text',sans-serif;font-weight:500;font-size:16px;line-height:24px;\">"+t.subtitle+'</div></div><div><a href="https://ownid.com/" style="text-decoration:none;display:flex;justify-content:flex-end;"><span style="font-family:\'SF Pro Text\',sans-serif;font-weight:500;font-size:12px;line-height:24px;color:#ACACAC;margin-right:5px;">What is this?</span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="#030303"><path d="M4.16 8.322a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776L9.108.368c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776L5.052 7.95a1.25 1.25 0 0 1-.891.371zm7.116-1.286a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l1.662-1.657c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-1.675 1.67a1.24 1.24 0 0 1-.878.358zm-7.154 7.132a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l4.242-4.23c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-4.242 4.23a1.23 1.23 0 0 1-.891.371zm2.9 2.877a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l1.795-1.8c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-1.795 1.8c-.24.252-.56.37-.9.37zm4.708-4.695a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l4.1-4.096c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-4.1 4.096c-.24.252-.56.37-.9.37zM1.25 11.2A1.25 1.25 0 0 0 2.5 9.965a1.25 1.25 0 1 0-2.5 0 1.25 1.25 0 0 0 1.25 1.246zM9.906 20a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l5.944-5.925c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-5.944 5.926a1.25 1.25 0 0 1-.891.371zm8.844-8.815a1.25 1.25 0 1 0-1.25-1.246 1.25 1.25 0 0 0 1.25 1.246z"/></svg></a></div></div>\n      </div>\n      '+b+'\n      <div ownid-done style="display:none; position: absolute;top: 0;background: #FFF;width: 100%;height: 100%;justify-content: space-around;align-items: center;">\n        <svg style="margin: 0 48px;flex: 0 0 auto;" xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="#5dc122"><path d="M32 0A32 32 0 0 0 9.373 54.627 32 32 0 0 0 64 32c-.01-8.484-3.383-16.618-9.383-22.617A32.04 32.04 0 0 0 32 0zm0 59.43a27.43 27.43 0 0 1-19.395-46.824A27.43 27.43 0 0 1 59.429 32 27.46 27.46 0 0 1 32 59.429zm14.783-40.372L25.36 40.414l-7.592-7.568c-.213-.22-.467-.395-.748-.515a2.32 2.32 0 0 0-.9-.186 2.31 2.31 0 0 0-.893.171 2.32 2.32 0 0 0-.757.502 2.3 2.3 0 0 0-.504.755 2.29 2.29 0 0 0 .016 1.777 2.3 2.3 0 0 0 .517.746l9.222 9.192a2.31 2.31 0 0 0 3.26 0l23.054-22.98c.42-.433.652-1.014.647-1.617a2.29 2.29 0 0 0-.675-1.605 2.31 2.31 0 0 0-3.232-.028z"/></svg>\n        <div style="font-weight: bold;font-size: 14px;line-height: 20px;color: #000000;">All done! Continue to finish your registration.</div>\n      </div>',e},x.prototype.update=function(t){this.ref&&!this.qrCodeWrapper&&(this.qrCodeWrapper=this.ref.querySelector(".own-id-qr-code")),this.qrCodeWrapper&&(this.qrCodeWrapper.innerHTML=this.generateQRCode(t))},x.prototype.showSecurityCheck=function(t,e,r){this.securityCheckShown||(this.securityCheckShown=!0,this.ref.innerHTML='\n      <div style="padding:15px;background:#fff;border-radius:10px">\n        <section style="display: flex;justify-content: space-between;">\n          <section style="display: flex;justify-content: center;align-items: center;flex: 50% 0 0;font-size: 32px;line-height: 36px;text-align: center;letter-spacing: 12px;">'+t+'</section>\n          <section style="font-size: 14px;line-height: 20px;">\n            <div style="font-weight: bold">Verification Code</div>\n            <div style="margin-top: 4px">Does the code on your device match this one?</div>\n          </section>\n        </section>\n        <section style="display: flex;justify-content: center;margin-top: 12px">\n          <button ownid-btn="no" style="margin-right: 16px;">No</button>\n          <button ownid-btn="yes">Yes</button>\n        </section>\n      </div>\n      '+b,this.ref.querySelector('[ownid-btn="yes"]').addEventListener("click",function(){return e()}),this.ref.querySelector('[ownid-btn="no"]').addEventListener("click",function(){return r()}))},x.prototype.showPending=function(t){var e;void 0===t&&(t=function(){}),this.spendingShown||(this.spendingShown=!0,(e=this.ref.querySelector("[ownid-pending]"))&&(e.style.display="flex",e.querySelector('[ownid-btn="cancel"]').addEventListener("click",function(){return t()})))},x.prototype.showDone=function(){var t=this.ref.querySelector("[ownid-done]");t&&(t.style.display="flex")},x.prototype.generateQRCode=function(t){var e=y(0,"L");return e.addData(t),e.make(),e.createImgTag(3,7)},x.prototype.addOwnIDStyleTag=function(t){var e=document.createElement("style");e.id=t,e.innerHTML="\n      [ownid-btn] {min-width: 72px; height: 36px;background: #FFF; border: 1px solid #000; border-radius: 20px;color: #000; cursor: pointer; outline: none;transition: background-color .2s ease-out, color .2s ease-out;}\n      [ownid-btn]:hover {color: #FFF; background: #000;}\n      @-webkit-keyframes spin {\n        17% {\n          background: none;\n          -webkit-box-shadow: none;\n                  box-shadow: none;\n        }\n        35% {\n          -webkit-transform: rotate(-135deg);\n          transform:rotate(-135deg);\n          width: 5px;\n          height: 5px;\n          background: #000;\n          border-radius: 1px;\n          -webkit-box-shadow: 0 0 2px #000;\n                  box-shadow: 0 0 2px #000;\n        }\n        53% {\n          background: none;\n          -webkit-box-shadow: none;\n                  box-shadow: none;\n        }\n        70% {\n          -webkit-transform: rotate(360deg);\n          transform:rotate(360deg);\n          width: 20px;\n          height: 20px;\n        }\n        100% {\n          -webkit-transform: rotate(360deg);\n          transform:rotate(360deg);\n        }\n      }\n      @keyframes spin {\n        17% {\n          background: none;\n          -webkit-box-shadow: none;\n                  box-shadow: none;\n        }\n        35% {\n          -webkit-transform: rotate(-135deg);\n          transform:rotate(-135deg);\n          width: 5px;\n          height: 5px;\n          background: #000;\n          border-radius: 1px;\n          -webkit-box-shadow: 0 0 2px #000;\n                  box-shadow: 0 0 2px #000;\n        }\n        53% {\n          background: none;\n          -webkit-box-shadow: none;\n                  box-shadow: none;\n        }\n        70% {\n          -webkit-transform: rotate(360deg);\n          transform:rotate(360deg);\n          width: 20px;\n          height: 20px;\n        }\n        100% {\n          -webkit-transform: rotate(360deg);\n          transform:rotate(360deg);\n        }\n      }",document.head.appendChild(e)},x);function x(t){var e=h.call(this,t)||this;return e.qrCodeWrapper=null,e.securityCheckShown=!1,e.spendingShown=!1,e}(d=w=w||{}).Register="register",d.Login="login",d.Link="link",d.Recover="recover",(g=p=p||{}).en="en",g.enGB="en-GB",g.enUS="en-US",g.ru="ru",g.es="es";var k=(A.URLPrefix="/ownid",A.statusUrl="/status",A.approveUrl="/:context/approve",A.statusTimeout=2e3,A.defaultLanguage=p.en,A);function A(){}var T,L,S,C={login:{mobileTitle:"Instant Sign In",desktopTitle:"Instant Sign In",desktopSubtitle:"Use your phone to scan for passwordless sign in."},register:{mobileTitle:"Register without a password",desktopTitle:"Skip the password with OwnID",desktopSubtitle:"Use your phone to scan and complete a passwordless registration."},link:{mobileTitle:"Enable Instant Login",desktopTitle:"Enable Instant Login",desktopSubtitle:"Use your phone to scan for enabling passwordless sign in."},recover:{mobileTitle:"Recover account without a password",desktopTitle:"Skip the password with OwnID",desktopSubtitle:"Use your phone to scan and complete a passwordless account recover."}},B={login:{mobileTitle:"Мгновенный вход",desktopTitle:"Мгновенный вход",desktopSubtitle:"Используйте свой телефон для сканирования и входа без пароля."},register:{mobileTitle:"Зарегистрироваться без пароля",desktopTitle:"Пропустить пароль с OwnID",desktopSubtitle:"Используйте свой телефон для сканирования и завершения регистрации без пароля."},link:{mobileTitle:"Включить мгновенный вход",desktopTitle:"Включить мгновенный вход",desktopSubtitle:"Используйте свой телефон для сканирования и включения входа без пароля."},recover:{mobileTitle:"Восстановить аккаунт без пароля",desktopTitle:"Пропустить пароль с OwnID",desktopSubtitle:"Используйте свой телефон для сканирования и завершения востановления аккаунта без пароля."}},M=(D.texts=((T={})[p.en]=C,T[p.ru]=B,T),D);function D(){}(S=L=L||{})[S.Initiated=1]="Initiated",S[S.Started=2]="Started",S[S.WaitingForApproval=3]="WaitingForApproval",S[S.Approved=4]="Approved",S[S.Declined=5]="Declined",S[S.Finished=99]="Finished";var E,P=(t(O,E=r),O.prototype.init=function(t){return this.getContext(t.URLPrefix||k.URLPrefix,t.data)},O.prototype.getContext=function(n,o){return void 0===o&&(o=null),e(this,void 0,void 0,function(){var e,r;return v(this,function(t){switch(t.label){case 0:return e={type:this.config.type||w.Register,data:o,qr:!this.isMobile(),partial:!!this.config.partial},[4,this.requestService.post(n,e)];case 1:if(!(r=t.sent()))throw new Error("No context data received");return this.cacheExpiration=r.expiration,this.contexts.push(r),[2]}})})},O.prototype.render=function(){var t=this,e=this.config.language||k.defaultLanguage;if(this.isMobile()){if(this.disableMobile)return void console.warn("Mobile rendering is disabled for "+this.config.type+" widget type");var r=this.config.mobileTitle||M.texts[e][this.config.type].mobileTitle;this.link=new c({href:this.getStartUrl(),title:r}),this.link.attachHandler("click",function(){t.setCallStatus(),clearTimeout(t.refreshLinkTimeout),t.attachPostMessagesHandler()}),this.addChild(this.link)}else{if(this.disableDesktop)return void console.warn("Desktop rendering is disabled for "+this.config.type+" widget type");var n=this.config.desktopTitle||M.texts[e][this.config.type].desktopTitle,o=this.config.desktopTitle||M.texts[e][this.config.type].desktopSubtitle;this.qr=new m({href:this.getStartUrl(),title:n,subtitle:o}),this.addChild(this.qr)}},O.prototype.getStartUrl=function(){return this.contexts[this.contexts.length-1].url},O.prototype.getStatusUrl=function(){return""+(this.config.URLPrefix||k.URLPrefix).replace(/\/+$/,"")+k.statusUrl},O.prototype.getApproveUrl=function(t){return""+(this.config.URLPrefix||k.URLPrefix).replace(/\/+$/,"")+k.approveUrl.replace(":context",t)},O.prototype.setCallStatus=function(){var t=this;this.statusTimeout=window.setTimeout(function(){return t.callStatus()},this.config.statusInterval||k.statusTimeout)},O.prototype.callStatus=function(){var y;return e(this,void 0,void 0,function(){var e,r,n,o,i,a,s,u,c,f,l,h,d,p,g=this;return v(this,function(t){switch(t.label){case 0:return e=this.contexts.map(function(t){return{context:t.context,nonce:t.nonce}}),[4,this.requestService.post(this.getStatusUrl(),e)];case 1:if(!(r=t.sent()))return[2,this.setCallStatus()];if(n=r.map(function(t){return t.status}),0<=(o=n.indexOf(L.Finished)))switch(null!==(y=this.qr)&&void 0!==y&&y.showDone(),i=r[o].payload.data,this.config.type){case w.Link:return[2,this.config.onLink&&this.config.onLink(i)];case w.Login:return[2,this.config.onLogin&&this.config.onLogin(i)];case w.Recover:return[2,this.config.onRecover&&this.config.onRecover(i)];case w.Register:default:return[2,this.config.onRegister&&this.config.onRegister(i)]}for(0<=n.indexOf(L.Started)&&(window.clearTimeout(this.refreshLinkTimeout),this.qr&&(a=function(){return g.reCreateWidget()},this.qr.showPending(a))),0<=(s=n.indexOf(L.WaitingForApproval))&&(clearTimeout(this.refreshLinkTimeout),u=this.contexts[s],c=r[s].payload.data.pin,this.qr&&(f=function(){var t;g.sendApprove(!0,u),null!==(t=g.qr)&&void 0!==t&&t.showPending(function(){return g.reCreateWidget()})},l=function(){var t;g.sendApprove(!1,u),null!==(t=g.qr)&&void 0!==t&&t.showPending(),g.reCreateWidget()},this.qr.showSecurityCheck(c,f,l))),h=function(t){var e=d.contexts[t];r.findIndex(function(t){return t.context===e.context})<0&&d.contexts.splice(t,1)},p=(d=this).contexts.length;p--;)h(p);return[2,this.setCallStatus()]}})})},O.prototype.sendApprove=function(t,e){var r=e.context,n=e.nonce;this.requestService.post(this.getApproveUrl(r),{context:r,nonce:n,approved:t})},O.prototype.setRefreshLinkOrQR=function(){var t=this;this.cacheExpiration&&(this.refreshLinkTimeout=window.setTimeout(function(){return t.refreshLinkOrQR()},this.cacheExpiration/2))},O.prototype.refreshLinkOrQR=function(){var t=this;this.init(this.config).then(function(){t.qr?t.qr.update(t.getStartUrl()):t.link&&t.link.update(t.getStartUrl()),t.setRefreshLinkOrQR()},function(t){console.error(t.message)})},O.prototype.destroy=function(){clearTimeout(this.statusTimeout),clearTimeout(this.refreshLinkTimeout),this.elements.forEach(function(t){return t.destroy()})},O.prototype.update=function(t){this.elements.forEach(function(t){return t.destroy()}),this.config=u(u({},this.config),t),this.render()},O.prototype.attachPostMessagesHandler=function(){var e=this;window.addEventListener("message",function(t){"ownid postMessages enabled"===t.data&&clearTimeout(e.statusTimeout),"ownid success"===t.data&&e.callStatus()},!1)},O.prototype.reCreateWidget=function(){var t=this;this.contexts=[],this.widgetReady=this.init(this.config).then(function(){t.destroy(),t.render(),t.setRefreshLinkOrQR(),t.isMobile()||t.setCallStatus()})},O);function O(t,e,r,n){void 0===r&&(r=!1),void 0===n&&(n=!1);var o=E.call(this,t)||this;return o.config=t,o.requestService=e,o.disableDesktop=r,o.disableMobile=n,o.contexts=[],o.widgetReady=o.init(t).then(function(){o.render(),o.setRefreshLinkOrQR(),o.isMobile()||o.setCallStatus()},function(t){console.error(t.message)}),o}var R,I=l(function(t,e){!function(u){var c=function(t){return t}(typeof self!=="undefined"?self:this),f={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{new Blob;return true}catch(t){return false}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function e(t){return t&&DataView.prototype.isPrototypeOf(t)}if(f.arrayBuffer){var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"];var n=ArrayBuffer.isView||function(t){return t&&r.indexOf(Object.prototype.toString.call(t))>-1}}function o(t){if(typeof t!=="string"){t=String(t)}if(/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||t===""){throw new TypeError("Invalid character in header field name")}return t.toLowerCase()}function i(t){if(typeof t!=="string"){t=String(t)}return t}function t(e){var t={next:function(){var t=e.shift();return{done:t===undefined,value:t}}};if(f.iterable){t[Symbol.iterator]=function(){return t}}return t}function a(e){this.map={};if(e instanceof a){e.forEach(function(t,e){this.append(e,t)},this)}else if(Array.isArray(e)){e.forEach(function(t){this.append(t[0],t[1])},this)}else if(e){Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}}if(a.prototype.append=function(t,e){t=o(t);e=i(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},a.prototype["delete"]=function(t){delete this.map[o(t)]},a.prototype.get=function(t){t=o(t);return this.has(t)?this.map[t]:null},a.prototype.has=function(t){return this.map.hasOwnProperty(o(t))},a.prototype.set=function(t,e){this.map[o(t)]=i(e)},a.prototype.forEach=function(t,e){for(var r in this.map){if(this.map.hasOwnProperty(r)){t.call(e,this.map[r],r,this)}}},a.prototype.keys=function(){var r=[];this.forEach(function(t,e){r.push(e)});return t(r)},a.prototype.values=function(){var e=[];this.forEach(function(t){e.push(t)});return t(e)},a.prototype.entries=function(){var r=[];this.forEach(function(t,e){r.push([e,t])});return t(r)},f.iterable){a.prototype[Symbol.iterator]=a.prototype.entries}function s(t){if(t.bodyUsed){return Promise.reject(new TypeError("Already read"))}t.bodyUsed=true}function l(r){return new Promise(function(t,e){r.onload=function(){t(r.result)};r.onerror=function(){e(r.error)}})}function h(t){var e=new FileReader;var r=l(e);e.readAsArrayBuffer(t);return r}function d(t){var e=new FileReader;var r=l(e);e.readAsText(t);return r}function p(t){var e=new Uint8Array(t);var r=new Array(e.length);for(var n=0;n<e.length;n++){r[n]=String.fromCharCode(e[n])}return r.join("")}function g(t){if(t.slice){return t.slice(0)}else{var e=new Uint8Array(t.byteLength);e.set(new Uint8Array(t));return e.buffer}}function y(){this.bodyUsed=false;this._initBody=function(t){this.bodyUsed=this.bodyUsed;this._bodyInit=t;if(!t){this._bodyText=""}else if(typeof t==="string"){this._bodyText=t}else if(f.blob&&Blob.prototype.isPrototypeOf(t)){this._bodyBlob=t}else if(f.formData&&FormData.prototype.isPrototypeOf(t)){this._bodyFormData=t}else if(f.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)){this._bodyText=t.toString()}else if(f.arrayBuffer&&f.blob&&e(t)){this._bodyArrayBuffer=g(t.buffer);this._bodyInit=new Blob([this._bodyArrayBuffer])}else if(f.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||n(t))){this._bodyArrayBuffer=g(t)}else{this._bodyText=t=Object.prototype.toString.call(t)}if(!this.headers.get("content-type")){if(typeof t==="string"){this.headers.set("content-type","text/plain;charset=UTF-8")}else if(this._bodyBlob&&this._bodyBlob.type){this.headers.set("content-type",this._bodyBlob.type)}else if(f.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)){this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8")}}};if(f.blob){this.blob=function(){var t=s(this);if(t){return t}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(new Blob([this._bodyArrayBuffer]))}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){if(this._bodyArrayBuffer){return s(this)||Promise.resolve(this._bodyArrayBuffer)}else{return this.blob().then(h)}}}this.text=function(){var t=s(this);if(t){return t}if(this._bodyBlob){return d(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(p(this._bodyArrayBuffer))}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}};if(f.formData){this.formData=function(){return this.text().then(m)}}this.json=function(){return this.text().then(JSON.parse)};return this}var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(t){var e=t.toUpperCase();return v.indexOf(e)>-1?e:t}function b(t,e){e=e||{};var r=e.body;if(t instanceof b){if(t.bodyUsed){throw new TypeError("Already read")}this.url=t.url;this.credentials=t.credentials;if(!e.headers){this.headers=new a(t.headers)}this.method=t.method;this.mode=t.mode;this.signal=t.signal;if(!r&&t._bodyInit!=null){r=t._bodyInit;t.bodyUsed=true}}else{this.url=String(t)}this.credentials=e.credentials||this.credentials||"same-origin";if(e.headers||!this.headers){this.headers=new a(e.headers)}this.method=w(e.method||this.method||"GET");this.mode=e.mode||this.mode||null;this.signal=e.signal||this.signal;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&r){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(r);if(this.method==="GET"||this.method==="HEAD"){if(e.cache==="no-store"||e.cache==="no-cache"){var n=/([?&])_=[^&]*/;if(n.test(this.url)){this.url=this.url.replace(n,"$1_="+(new Date).getTime())}else{var o=/\?/;this.url+=(o.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}}function m(t){var o=new FormData;t.trim().split("&").forEach(function(t){if(t){var e=t.split("=");var r=e.shift().replace(/\+/g," ");var n=e.join("=").replace(/\+/g," ");o.append(decodeURIComponent(r),decodeURIComponent(n))}});return o}function x(t){var o=new a;var e=t.replace(/\r?\n[\t ]+/g," ");e.split(/\r?\n/).forEach(function(t){var e=t.split(":");var r=e.shift().trim();if(r){var n=e.join(":").trim();o.append(r,n)}});return o}function k(t,e){if(!e){e={}}this.type="default";this.status=e.status===undefined?200:e.status;this.ok=this.status>=200&&this.status<300;this.statusText="statusText"in e?e.statusText:"";this.headers=new a(e.headers);this.url=e.url||"";this._initBody(t)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},y.call(b.prototype),y.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},k.error=function(){var t=new k(null,{status:0,statusText:""});t.type="error";return t};var A=[301,302,303,307,308];if(k.redirect=function(t,e){if(A.indexOf(e)===-1){throw new RangeError("Invalid status code")}return new k(null,{status:e,headers:{location:t}})},u.DOMException=c.DOMException,typeof u.DOMException!=="function"){u.DOMException=function(t,e){this.message=t;this.name=e;var r=Error(t);this.stack=r.stack};u.DOMException.prototype=Object.create(Error.prototype);u.DOMException.prototype.constructor=u.DOMException}function T(a,s){return new Promise(function(r,t){var e=new b(a,s);if(e.signal&&e.signal.aborted){return t(new u.DOMException("Aborted","AbortError"))}var n=new XMLHttpRequest;function o(){n.abort()}n.onload=function(){var t={status:n.status,statusText:n.statusText,headers:x(n.getAllResponseHeaders()||"")};t.url="responseURL"in n?n.responseURL:t.headers.get("X-Request-URL");var e="response"in n?n.response:n.responseText;setTimeout(function(){r(new k(e,t))},0)};n.onerror=function(){setTimeout(function(){t(new TypeError("Network request failed"))},0)};n.ontimeout=function(){setTimeout(function(){t(new TypeError("Network request failed"))},0)};n.onabort=function(){setTimeout(function(){t(new u.DOMException("Aborted","AbortError"))},0)};function i(e){try{return e===""&&c.location.href?c.location.href:e}catch(t){return e}}n.open(e.method,i(e.url),true);if(e.credentials==="include"){n.withCredentials=true}else if(e.credentials==="omit"){n.withCredentials=false}if("responseType"in n){if(f.blob){n.responseType="blob"}else if(f.arrayBuffer&&e.headers.get("Content-Type")&&e.headers.get("Content-Type").indexOf("application/octet-stream")!==-1){n.responseType="arraybuffer"}}e.headers.forEach(function(t,e){n.setRequestHeader(e,t)});if(e.signal){e.signal.addEventListener("abort",o);n.onreadystatechange=function(){if(n.readyState===4){e.signal.removeEventListener("abort",o)}}}n.send(typeof e._bodyInit==="undefined"?null:e._bodyInit)})}if(T.polyfill=true,!c.fetch){c.fetch=T;c.Headers=a;c.Request=b;c.Response=k}u.Headers=a,u.Request=b,u.Response=k,u.fetch=T,Object.defineProperty(u,"__esModule",{value:true})}(e)});(R=I)&&R.__esModule&&Object.prototype.hasOwnProperty.call(R,"default")&&R.default;var U=(_.prototype.post=function(r,n){var o;return void 0===n&&(n={}),e(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return null!==(o=this.logger)&&void 0!==o&&o.logInfo("request: "+r),[4,fetch(r,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(n)})];case 1:return 200===(e=t.sent()).status?[2,e.json()]:[2,null]}})})},_);function _(t){this.logger=t}var z,j,q,F=(t(H,z=P),H.prototype.init=function(i){var t=this;return new Promise(function(n,o){window.gigya.accounts.getJWT({callback:function(r){return e(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return 0!==r.errorCode&&(e="Gigya.GetJWT -> "+r.errorCode+": "+r.errorMessage,console.error(e),o(new Error(e))),[4,this.getContext(i.URLPrefix||k.URLPrefix,{jwt:r.id_token})];case 1:return t.sent(),n(),[2]}})})}})})},H);function H(t,e){var r=z.call(this,t,e)||this;return r.config=t,r.requestService=e,r}(q=j=j||{})[q.debug=1]="debug",q[q.info=2]="info",q[q.error=3]="error";var G=(W.prototype.logDebug=function(t){this.logLevel>j.debug||this.externalLogger.logDebug(t)},W.prototype.logInfo=function(t){this.logLevel>j.info||this.externalLogger.logInfo(t)},W.prototype.logError=function(t){this.externalLogger.logError(t)},W);function W(t,e){this.externalLogger=t,this.logLevel=e}var N=(Q.prototype.init=function(t){var e;void 0===t&&(t={}),(this.config=t).logger&&(e=t.logLevel?j[t.logLevel]:j.error,this.config.logger=new G(t.logger,e))},Q.prototype.render=function(t){if(!t.element)return console.error("Parent element wasn't found on the page"),null;var e=t.type===w.Link;return new P(u(u({},this.config),t),new U(this.config.logger),e,!1)},Q.prototype.renderLinkGigya=function(a,s){return e(this,void 0,void 0,function(){var o,i=this;return v(this,function(t){return a.element?(o=window.gigya,s||o?[2,new Promise(function(t){function e(){t(new F(u(u({},i.config),a),new U))}var r,n;i.isGigyaAdded||o?e():(i.isGigyaAdded=!0,r="https://cdns.gigya.com/js/gigya.js?apikey="+s,(n=document.createElement("script")).src=r,n.addEventListener("load",e),document.head.appendChild(n))})]:(console.error("Gigya apiKey should be provided"),[2,null])):(console.error("Parent element wasn't found on the page"),[2,null])})})},Q);function Q(){this.config={},this.isGigyaAdded=!1}window.ownid=window.ownid instanceof N?window.ownid:new N,window.ownidAsyncInit?window.ownidAsyncInit():console.log("ownid sdk is not initialized, ownidAsyncInit fucntion was not found")});
//# sourceMappingURL=ownid-web-ui-sdk.umd.js.map
