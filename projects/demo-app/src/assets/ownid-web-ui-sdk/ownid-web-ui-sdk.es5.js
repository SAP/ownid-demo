var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function __extends(t,e){function n(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var __assign=function(){return(__assign=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function __awaiter(t,a,s,c){return new(s=s||Promise)(function(n,e){function r(t){try{o(c.next(t))}catch(t){e(t)}}function i(t){try{o(c.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,i)}o((c=c.apply(t,a||[])).next())})}function __generator(n,r){var i,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var BaseComponent=function(){function t(t){this.elements=[],this.context=null,this.nonce=null,this.parent=t.element}return t.prototype.addChild=function(t){t.appendToParent(this.parent),this.elements.push(t)},t.prototype.isMobile=function(){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|android|silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[23]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(navigator.userAgent.slice(0,4))},t}(),BaseCommonComponent=function(){function t(t){this.ref=this.render(t)}return t.prototype.attachHandler=function(t,e){this.ref.addEventListener(t,e)},t.prototype.appendToParent=function(t){t.append(this.ref)},t.prototype.destroy=function(){this.ref.remove()},t}(),LinkButton=function(n){function t(t){var e=n.call(this,t)||this;return e.href=t.href,e}return __extends(t,n),t.prototype.render=function(t){var e=this,n=document.createElement("button");return n.addEventListener("click",function(){window.open(e.href)}),n.style.cssText="width: 288px; height: 40px;\n      display: flex; align-items: center; justify-content: center; border: none; border-radius: 20px;\n      font-family: SF Pro Text, sans-serif; font-style: normal; font-weight: 500; font-size: 14px; color: #030303;\n      text-decoration: none; background-color: #fff;",n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="#030303"><path d="M4.16 8.322a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776L9.108.368c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776L5.052 7.95a1.25 1.25 0 0 1-.891.371zm7.116-1.286a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l1.662-1.657c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-1.675 1.67a1.24 1.24 0 0 1-.878.358zm-7.154 7.132a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l4.242-4.23c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-4.242 4.23a1.23 1.23 0 0 1-.891.371zm2.9 2.877a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l1.795-1.8c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-1.795 1.8c-.24.252-.56.37-.9.37zm4.708-4.695a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l4.1-4.096c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-4.1 4.096c-.24.252-.56.37-.9.37zM1.25 11.2A1.25 1.25 0 0 0 2.5 9.965a1.25 1.25 0 1 0-2.5 0 1.25 1.25 0 0 0 1.25 1.246zM9.906 20a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l5.944-5.925c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-5.944 5.926a1.25 1.25 0 0 1-.891.371zm8.844-8.815a1.25 1.25 0 1 0-1.25-1.246 1.25 1.25 0 0 0 1.25 1.246z"/></svg><span style="margin-left: 10px;">'+t.title+"</span>",n},t.prototype.update=function(t){this.href=t},t}(BaseCommonComponent);function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}var WidgetType,Languages,qrcode_1=createCommonjsModule(function(t,e){var n=function(){function o(t,e){function a(t,e){l=function(t){for(var e=new Array(t),n=0;n<t;n+=1){e[n]=new Array(t);for(var r=0;r<t;r+=1)e[n][r]=null}return e}(f=4*s+17),n(0,0),n(f-7,0),n(0,f-7),o(),i(),h(t,e),7<=s&&d(t),null==r&&(r=v(s,c,u)),p(r,e)}var s=t,c=y[e],l=null,f=0,r=null,u=[],g={},n=function(t,e){for(var n=-1;n<=7;n+=1)if(!(t+n<=-1||f<=t+n))for(var r=-1;r<=7;r+=1)e+r<=-1||f<=e+r||(l[t+n][e+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},i=function(){for(var t=8;t<f-8;t+=1)null==l[t][6]&&(l[t][6]=t%2==0);for(var e=8;e<f-8;e+=1)null==l[6][e]&&(l[6][e]=e%2==0)},o=function(){for(var t=m.getPatternPosition(s),e=0;e<t.length;e+=1)for(var n=0;n<t.length;n+=1){var r=t[e],i=t[n];if(null==l[r][i])for(var o=-2;o<=2;o+=1)for(var a=-2;a<=2;a+=1)l[r+o][i+a]=-2==o||2==o||-2==a||2==a||0==o&&0==a}},d=function(t){for(var e=m.getBCHTypeNumber(s),n=0;n<18;n+=1){var r=!t&&1==(e>>n&1);l[Math.floor(n/3)][n%3+f-8-3]=r}for(n=0;n<18;n+=1){r=!t&&1==(e>>n&1);l[n%3+f-8-3][Math.floor(n/3)]=r}},h=function(t,e){for(var n=c<<3|e,r=m.getBCHTypeInfo(n),i=0;i<15;i+=1){var o=!t&&1==(r>>i&1);i<6?l[i][8]=o:i<8?l[i+1][8]=o:l[f-15+i][8]=o}for(i=0;i<15;i+=1){o=!t&&1==(r>>i&1);i<8?l[8][f-i-1]=o:i<9?l[8][15-i-1+1]=o:l[8][15-i-1]=o}l[f-8][8]=!t},p=function(t,e){for(var n=-1,r=f-1,i=7,o=0,a=m.getMaskFunction(e),s=f-1;0<s;s-=2)for(6==s&&--s;;){for(var c,u=0;u<2;u+=1){null==l[r][s-u]&&(c=!1,o<t.length&&(c=1==(t[o]>>>i&1)),a(r,s-u)&&(c=!c),l[r][s-u]=c,-1==--i&&(o+=1,i=7))}if((r+=n)<0||f<=r){r-=n,n=-n;break}}},v=function(t,e,n){for(var r=S.getRSBlocks(t,e),i=M(),o=0;o<n.length;o+=1){var a=n[o];i.put(a.getMode(),4),i.put(a.getLength(),m.getLengthInBits(a.getMode(),t)),a.write(i)}for(var s=0,o=0;o<r.length;o+=1)s+=r[o].dataCount;if(i.getLengthInBits()>8*s)throw"code length overflow. ("+i.getLengthInBits()+">"+8*s+")";for(i.getLengthInBits()+4<=8*s&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*s||(i.put(236,8),i.getLengthInBits()>=8*s));)i.put(17,8);return function(t,e){for(var n=0,r=0,i=0,o=new Array(e.length),a=new Array(e.length),s=0;s<e.length;s+=1){var c=e[s].dataCount,u=e[s].totalCount-c,r=Math.max(r,c),i=Math.max(i,u);o[s]=new Array(c);for(var l=0;l<o[s].length;l+=1)o[s][l]=255&t.getBuffer()[l+n];n+=c;var f=m.getErrorCorrectPolynomial(u),d=b(o[s],f.getLength()-1).mod(f);a[s]=new Array(f.getLength()-1);for(l=0;l<a[s].length;l+=1){var g=l+d.getLength()-a[s].length;a[s][l]=0<=g?d.getAt(g):0}}for(var h=0,l=0;l<e.length;l+=1)h+=e[l].totalCount;for(var p=new Array(h),v=0,l=0;l<r;l+=1)for(s=0;s<e.length;s+=1)l<o[s].length&&(p[v]=o[s][l],v+=1);for(l=0;l<i;l+=1)for(s=0;s<e.length;s+=1)l<a[s].length&&(p[v]=a[s][l],v+=1);return p}(i,r)};g.addData=function(t,e){var n=null;switch(e=e||"Byte"){case"Numeric":n=C(t);break;case"Alphanumeric":n=T(t);break;case"Byte":n=I(t);break;case"Kanji":n=G(t);break;default:throw"mode:"+e}u.push(n),r=null},g.isDark=function(t,e){if(t<0||f<=t||e<0||f<=e)throw t+","+e;return l[t][e]},g.getModuleCount=function(){return f},g.make=function(){if(s<1){for(var t=1;t<40;t++){for(var e=S.getRSBlocks(t,c),n=M(),r=0;r<u.length;r++){var i=u[r];n.put(i.getMode(),4),n.put(i.getLength(),m.getLengthInBits(i.getMode(),t)),i.write(n)}for(var o=0,r=0;r<e.length;r++)o+=e[r].dataCount;if(n.getLengthInBits()<=8*o)break}s=t}a(!1,function(){for(var t=0,e=0,n=0;n<8;n+=1){a(!0,n);var r=m.getLostPoint(g);(0==n||r<t)&&(t=r,e=n)}return e}())},g.createTableTag=function(t,e){t=t||2;var n="";n+='<table style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",n+='">',n+="<tbody>";for(var r=0;r<g.getModuleCount();r+=1){n+="<tr>";for(var i=0;i<g.getModuleCount();i+=1)n+='<td style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: 0px;",n+=" width: "+t+"px;",n+=" height: "+t+"px;",n+=" background-color: ",n+=g.isDark(r,i)?"#000000":"#ffffff",n+=";",n+='"/>';n+="</tr>"}return n+="</tbody>",n+="</table>"},g.createSvgTag=function(t,e,n,r){var i={};"object"==typeof t&&(t=(i=t).cellSize,e=i.margin,n=i.alt,r=i.title),t=t||2,e=void 0===e?4*t:e,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-description":null,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-title":null;var o,a,s,c=g.getModuleCount()*t+2*e,u="",l="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ";for(u+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',u+=i.scalable?"":' width="'+c+'px" height="'+c+'px"',u+=' viewBox="0 0 '+c+" "+c+'" ',u+=' preserveAspectRatio="xMinYMin meet"',u+=r.text||n.text?' role="img" aria-labelledby="'+w([r.id,n.id].join(" ").trim())+'"':"",u+=">",u+=r.text?'<title id="'+w(r.id)+'">'+w(r.text)+"</title>":"",u+=n.text?'<description id="'+w(n.id)+'">'+w(n.text)+"</description>":"",u+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',u+='<path d="',a=0;a<g.getModuleCount();a+=1)for(s=a*t+e,o=0;o<g.getModuleCount();o+=1)g.isDark(a,o)&&(u+="M"+(o*t+e)+","+s+l);return u+='" stroke="transparent" fill="black"/>',u+="</svg>"},g.createDataURL=function(i,t){i=i||2,t=void 0===t?4*i:t;var e=g.getModuleCount()*i+2*t,o=t,a=e-t;return B(e,e,function(t,e){if(o<=t&&t<a&&o<=e&&e<a){var n=Math.floor((t-o)/i),r=Math.floor((e-o)/i);return g.isDark(r,n)?0:1}return 1})},g.createImgTag=function(t,e,n){t=t||2,e=void 0===e?4*t:e;var r=g.getModuleCount()*t+2*e,i="";return i+="<img",i+=' src="',i+=g.createDataURL(t,e),i+='"',i+=' width="',i+=r,i+='"',i+=' height="',i+=r,i+='"',n&&(i+=' alt="',i+=w(n),i+='"'),i+="/>"};var w=function(t){for(var e="",n=0;n<t.length;n+=1){var r=t.charAt(n);switch(r){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=r}}return e};return g.createASCII=function(t,e){if((t=t||1)<2)return function(t){t=void 0===t?2:t;for(var e,n,r,i,o=+g.getModuleCount()+2*t,a=t,s=o-t,c={"██":"█","█ ":"▀"," █":"▄","  ":" "},u={"██":"▀","█ ":"▀"," █":" ","  ":" "},l="",f=0;f<o;f+=2){for(n=Math.floor(f-a),r=Math.floor(f+1-a),e=0;e<o;e+=1)i="█",a<=e&&e<s&&a<=f&&f<s&&g.isDark(n,Math.floor(e-a))&&(i=" "),a<=e&&e<s&&a<=f+1&&f+1<s&&g.isDark(r,Math.floor(e-a))?i+=" ":i+="█",l+=t<1&&s<=f+1?u[i]:c[i];l+="\n"}return o%2&&0<t?l.substring(0,l.length-o-1)+Array(1+o).join("▀"):l.substring(0,l.length-1)}(e);--t,e=void 0===e?2*t:e;for(var n,r,i,o=g.getModuleCount()*t+2*e,a=e,s=o-e,c=Array(t+1).join("██"),u=Array(t+1).join("  "),l="",f="",d=0;d<o;d+=1){for(r=Math.floor((d-a)/t),f="",n=0;n<o;n+=1)i=1,a<=n&&n<s&&a<=d&&d<s&&g.isDark(r,Math.floor((n-a)/t))&&(i=0),f+=i?c:u;for(r=0;r<t;r+=1)l+=f+"\n"}return l.substring(0,l.length-1)},g.renderTo2dContext=function(t,e){e=e||2;for(var n=g.getModuleCount(),r=0;r<n;r++)for(var i=0;i<n;i++)t.fillStyle=g.isDark(r,i)?"black":"white",t.fillRect(r*e,i*e,e,e)},g}o.stringToBytes=(o.stringToBytesFuncs={default:function(t){for(var e=[],n=0;n<t.length;n+=1){var r=t.charCodeAt(n);e.push(255&r)}return e}}).default,o.createStringToBytes=function(s,c){var o=function(){function t(){var t=e.read();if(-1==t)throw"eof";return t}for(var e=R(s),n=0,r={};;){var i=e.read();if(-1==i)break;var o=t(),a=t()<<8|t();r[String.fromCharCode(i<<8|o)]=a,n+=1}if(n!=c)throw n+" != "+c;return r}(),a="?".charCodeAt(0);return function(t){for(var e=[],n=0;n<t.length;n+=1){var r,i=t.charCodeAt(n);i<128?e.push(i):"number"==typeof(r=o[t.charAt(n)])?(255&r)==r?e.push(r):(e.push(r>>>8),e.push(255&r)):e.push(a)}return e}};var e,t,a=1,s=2,i=4,c=8,y={L:1,M:0,Q:3,H:2},n=0,r=1,u=2,l=3,f=4,d=5,g=6,h=7,m=(e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],(t={}).getBCHTypeInfo=function(t){for(var e=t<<10;0<=p(e)-p(1335);)e^=1335<<p(e)-p(1335);return 21522^(t<<10|e)},t.getBCHTypeNumber=function(t){for(var e=t<<12;0<=p(e)-p(7973);)e^=7973<<p(e)-p(7973);return t<<12|e},t.getPatternPosition=function(t){return e[t-1]},t.getMaskFunction=function(t){switch(t){case n:return function(t,e){return(t+e)%2==0};case r:return function(t,e){return t%2==0};case u:return function(t,e){return e%3==0};case l:return function(t,e){return(t+e)%3==0};case f:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case d:return function(t,e){return t*e%2+t*e%3==0};case g:return function(t,e){return(t*e%2+t*e%3)%2==0};case h:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw"bad maskPattern:"+t}},t.getErrorCorrectPolynomial=function(t){for(var e=b([1],0),n=0;n<t;n+=1)e=e.multiply(b([1,v.gexp(n)],0));return e},t.getLengthInBits=function(t,e){if(1<=e&&e<10)switch(t){case a:return 10;case s:return 9;case i:case c:return 8;default:throw"mode:"+t}else if(e<27)switch(t){case a:return 12;case s:return 11;case i:return 16;case c:return 10;default:throw"mode:"+t}else{if(!(e<41))throw"type:"+e;switch(t){case a:return 14;case s:return 13;case i:return 16;case c:return 12;default:throw"mode:"+t}}},t.getLostPoint=function(t){for(var e=t.getModuleCount(),n=0,r=0;r<e;r+=1)for(var i=0;i<e;i+=1){for(var o=0,a=t.isDark(r,i),s=-1;s<=1;s+=1)if(!(r+s<0||e<=r+s))for(var c=-1;c<=1;c+=1)i+c<0||e<=i+c||0==s&&0==c||a==t.isDark(r+s,i+c)&&(o+=1);5<o&&(n+=3+o-5)}for(r=0;r<e-1;r+=1)for(i=0;i<e-1;i+=1){var u=0;t.isDark(r,i)&&(u+=1),t.isDark(r+1,i)&&(u+=1),t.isDark(r,i+1)&&(u+=1),t.isDark(r+1,i+1)&&(u+=1),0!=u&&4!=u||(n+=3)}for(r=0;r<e;r+=1)for(i=0;i<e-6;i+=1)t.isDark(r,i)&&!t.isDark(r,i+1)&&t.isDark(r,i+2)&&t.isDark(r,i+3)&&t.isDark(r,i+4)&&!t.isDark(r,i+5)&&t.isDark(r,i+6)&&(n+=40);for(i=0;i<e;i+=1)for(r=0;r<e-6;r+=1)t.isDark(r,i)&&!t.isDark(r+1,i)&&t.isDark(r+2,i)&&t.isDark(r+3,i)&&t.isDark(r+4,i)&&!t.isDark(r+5,i)&&t.isDark(r+6,i)&&(n+=40);for(var l=0,i=0;i<e;i+=1)for(r=0;r<e;r+=1)t.isDark(r,i)&&(l+=1);return n+=Math.abs(100*l/e/e-50)/5*10},t);function p(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e}var v=function(){for(var e=new Array(256),n=new Array(256),t=0;t<8;t+=1)e[t]=1<<t;for(t=8;t<256;t+=1)e[t]=e[t-4]^e[t-5]^e[t-6]^e[t-8];for(t=0;t<255;t+=1)n[e[t]]=t;var r={glog:function(t){if(t<1)throw"glog("+t+")";return n[t]},gexp:function(t){for(;t<0;)t+=255;for(;256<=t;)t-=255;return e[t]}};return r}();function b(r,i){if(void 0===r.length)throw r.length+"/"+i;var e=function(){for(var t=0;t<r.length&&0==r[t];)t+=1;for(var e=new Array(r.length-t+i),n=0;n<r.length-t;n+=1)e[n]=r[n+t];return e}(),o={getAt:function(t){return e[t]},getLength:function(){return e.length},multiply:function(t){for(var e=new Array(o.getLength()+t.getLength()-1),n=0;n<o.getLength();n+=1)for(var r=0;r<t.getLength();r+=1)e[n+r]^=v.gexp(v.glog(o.getAt(n))+v.glog(t.getAt(r)));return b(e,0)},mod:function(t){if(o.getLength()-t.getLength()<0)return o;for(var e=v.glog(o.getAt(0))-v.glog(t.getAt(0)),n=new Array(o.getLength()),r=0;r<o.getLength();r+=1)n[r]=o.getAt(r);for(r=0;r<t.getLength();r+=1)n[r]^=v.gexp(v.glog(t.getAt(r))+e);return b(n,0).mod(t)}};return o}function w(){var n=[],i={writeByte:function(t){n.push(255&t)},writeShort:function(t){i.writeByte(t),i.writeByte(t>>>8)},writeBytes:function(t,e,n){e=e||0,n=n||t.length;for(var r=0;r<n;r+=1)i.writeByte(t[r+e])},writeString:function(t){for(var e=0;e<t.length;e+=1)i.writeByte(t.charCodeAt(e))},toByteArray:function(){return n},toString:function(){var t="";t+="[";for(var e=0;e<n.length;e+=1)0<e&&(t+=","),t+=n[e];return t+="]"}};return i}function A(){function n(t){a+=String.fromCharCode(e(63&t))}var r=0,i=0,o=0,a="",t={},e=function(t){if(!(t<0)){if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw"n:"+t};return t.writeByte=function(t){for(r=r<<8|255&t,i+=8,o+=1;6<=i;)n(r>>>i-6),i-=6},t.flush=function(){if(0<i&&(n(r<<6-i),i=r=0),o%3!=0)for(var t=3-o%3,e=0;e<t;e+=1)a+="="},t.toString=function(){return a},t}function x(t,e){var r=t,i=e,h=new Array(t*e),n={setPixel:function(t,e,n){h[e*r+t]=n},write:function(t){t.writeString("GIF87a"),t.writeShort(r),t.writeShort(i),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(r),t.writeShort(i),t.writeByte(0);var e=o(2);t.writeByte(2);for(var n=0;255<e.length-n;)t.writeByte(255),t.writeBytes(e,n,255),n+=255;t.writeByte(e.length-n),t.writeBytes(e,n,e.length-n),t.writeByte(0),t.writeString(";")}},o=function(t){for(var e=1<<t,n=1+(1<<t),r=t+1,i=p(),o=0;o<e;o+=1)i.add(String.fromCharCode(o));i.add(String.fromCharCode(e)),i.add(String.fromCharCode(n));var a,s,c,u=w(),l=(a=u,c=s=0,{write:function(t,e){if(t>>>e!=0)throw"length over";for(;8<=s+e;)a.writeByte(255&(t<<s|c)),e-=8-s,t>>>=8-s,s=c=0;c|=t<<s,s+=e},flush:function(){0<s&&a.writeByte(c)}});l.write(e,r);var f=0,d=String.fromCharCode(h[f]);for(f+=1;f<h.length;){var g=String.fromCharCode(h[f]);f+=1,i.contains(d+g)?d+=g:(l.write(i.indexOf(d),r),i.size()<4095&&(i.size()==1<<r&&(r+=1),i.add(d+g)),d=g)}return l.write(i.indexOf(d),r),l.write(n,r),l.flush(),u.toByteArray()},p=function(){var e={},n=0,r={add:function(t){if(r.contains(t))throw"dup key:"+t;e[t]=n,n+=1},size:function(){return n},indexOf:function(t){return e[t]},contains:function(t){return void 0!==e[t]}};return r};return n}var k,L,S=(k=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],(L={}).getRSBlocks=function(t,e){var n=function(t,e){switch(e){case y.L:return k[4*(t-1)+0];case y.M:return k[4*(t-1)+1];case y.Q:return k[4*(t-1)+2];case y.H:return k[4*(t-1)+3];default:return}}(t,e);if(void 0===n)throw"bad rs block @ typeNumber:"+t+"/errorCorrectionLevel:"+e;for(var r,i,o=n.length/3,a=[],s=0;s<o;s+=1)for(var c=n[3*s+0],u=n[3*s+1],l=n[3*s+2],f=0;f<c;f+=1)a.push((r=l,i=void 0,(i={}).totalCount=u,i.dataCount=r,i));return a},L),M=function(){var n=[],r=0,i={getBuffer:function(){return n},getAt:function(t){var e=Math.floor(t/8);return 1==(n[e]>>>7-t%8&1)},put:function(t,e){for(var n=0;n<e;n+=1)i.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return r},putBit:function(t){var e=Math.floor(r/8);n.length<=e&&n.push(0),t&&(n[e]|=128>>>r%8),r+=1}};return i},C=function(t){var e=a,r=t,n={getMode:function(){return e},getLength:function(t){return r.length},write:function(t){for(var e=r,n=0;n+2<e.length;)t.put(i(e.substring(n,n+3)),10),n+=3;n<e.length&&(e.length-n==1?t.put(i(e.substring(n,n+1)),4):e.length-n==2&&t.put(i(e.substring(n,n+2)),7))}},i=function(t){for(var e=0,n=0;n<t.length;n+=1)e=10*e+o(t.charAt(n));return e},o=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+t};return n},T=function(t){var e=s,r=t,n={getMode:function(){return e},getLength:function(t){return r.length},write:function(t){for(var e=r,n=0;n+1<e.length;)t.put(45*i(e.charAt(n))+i(e.charAt(n+1)),11),n+=2;n<e.length&&t.put(i(e.charAt(n)),6)}},i=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);if("A"<=t&&t<="Z")return t.charCodeAt(0)-"A".charCodeAt(0)+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return n},I=function(t){var e=i,n=o.stringToBytes(t),r={getMode:function(){return e},getLength:function(t){return n.length},write:function(t){for(var e=0;e<n.length;e+=1)t.put(n[e],8)}};return r},G=function(t){var e=c,n=o.stringToBytesFuncs.SJIS;if(!n)throw"sjis not supported.";!function(){var t=n("友");if(2!=t.length||38726!=(t[0]<<8|t[1]))throw"sjis not supported."}();var i=n(t),r={getMode:function(){return e},getLength:function(t){return~~(i.length/2)},write:function(t){for(var e=i,n=0;n+1<e.length;){var r=(255&e[n])<<8|255&e[n+1];if(33088<=r&&r<=40956)r-=33088;else{if(!(57408<=r&&r<=60351))throw"illegal char at "+(n+1)+"/"+r;r-=49472}r=192*(r>>>8&255)+(255&r),t.put(r,13),n+=2}if(n<e.length)throw"illegal char at "+(n+1)}};return r},R=function(t){var n=t,r=0,i=0,o=0,e={read:function(){for(;o<8;){if(r>=n.length){if(0==o)return-1;throw"unexpected end of file./"+o}var t=n.charAt(r);if(r+=1,"="==t)return o=0,-1;t.match(/^\s$/)||(i=i<<6|a(t.charCodeAt(0)),o+=6)}var e=i>>>o-8&255;return o-=8,e}},a=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw"c:"+t};return e},B=function(t,e,n){for(var r=x(t,e),i=0;i<e;i+=1)for(var o=0;o<t;o+=1)r.setPixel(o,i,n(o,i));var a=w();r.write(a);for(var s=A(),c=a.toByteArray(),u=0;u<c.length;u+=1)s.writeByte(c[u]);return s.flush(),"data:image/gif;base64,"+s};return o}();n.stringToBytesFuncs["UTF-8"]=function(t){return function(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e.push(r):r<2048?e.push(192|r>>6,128|63&r):r<55296||57344<=r?e.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&t.charCodeAt(n)),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return e}(t)},t.exports=n}),Qr=function(n){function t(t){var e=n.call(this,t)||this;return e.qrCodeWrapper=null,e.securityCheckShown=!1,e}return __extends(t,n),t.prototype.render=function(e){var n=document.createElement("div");return n.style.position="relative",n.innerHTML='<div style="display:flex;padding:15px;background:#fff;border-radius:10px"><div class="own-id-qr-code" style="margin-right:25px">'+this.generateQRCode(e.href)+'</div><div style="display:flex;flex-direction:column;justify-content:space-between;flex:1;"><div><div style="font-family:\'SF Compact Text\',sans-serif;font-weight:bold;font-size:20px;line-height:32px;margin-bottom:4px;">'+e.title+"</div><div style=\"font-family:'SF Compact Text',sans-serif;font-weight:500;font-size:16px;line-height:24px;\">"+e.subtitle+'</div></div><div><a href="https://ownid.com/" style="text-decoration:none;display:flex;justify-content:flex-end;"><span style="font-family:\'SF Pro Text\',sans-serif;font-weight:500;font-size:12px;line-height:24px;color:#ACACAC;margin-right:5px;">What is this?</span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="#030303"><path d="M4.16 8.322a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776L9.108.368c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776L5.052 7.95a1.25 1.25 0 0 1-.891.371zm7.116-1.286a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l1.662-1.657c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-1.675 1.67a1.24 1.24 0 0 1-.878.358zm-7.154 7.132a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l4.242-4.23c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-4.242 4.23a1.23 1.23 0 0 1-.891.371zm2.9 2.877a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l1.795-1.8c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-1.795 1.8c-.24.252-.56.37-.9.37zm4.708-4.695a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l4.1-4.096c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-4.1 4.096c-.24.252-.56.37-.9.37zM1.25 11.2A1.25 1.25 0 0 0 2.5 9.965a1.25 1.25 0 1 0-2.5 0 1.25 1.25 0 0 0 1.25 1.246zM9.906 20a1.25 1.25 0 0 1-.891-.371c-.492-.5-.492-1.286 0-1.776l5.944-5.925c.492-.5 1.3-.5 1.782 0s.492 1.286 0 1.776l-5.944 5.926a1.25 1.25 0 0 1-.891.371zm8.844-8.815a1.25 1.25 0 1 0-1.25-1.246 1.25 1.25 0 0 0 1.25 1.246z"/></svg></a></div></div></div>',setTimeout(function(){var t=n.querySelector(".own-id-qr-code");null!=t&&t.addEventListener("click",function(){return window.open(e.href)})}),n},t.prototype.update=function(t){this.ref&&!this.qrCodeWrapper&&(this.qrCodeWrapper=this.ref.querySelector(".own-id-qr-code")),this.qrCodeWrapper&&(this.qrCodeWrapper.innerHTML=this.generateQRCode(t))},t.prototype.showSecurityCheck=function(t,e,n){var r,i;this.securityCheckShown||(this.securityCheckShown=!0,this.ref.innerHTML='\n      <style>\n        ownid [ownid-btn] {min-width: 72px; height: 36px;background: #FFF; border: 1px solid #000; border-radius: 20px;color: #000; cursor: pointer; outline: none;transition: background-color .2s ease-out, color .2s ease-out;}\n        ownid [ownid-btn]:hover {color: #FFF; background: #000;}\n        @-moz-keyframes spin { 100% { -moz-transform: rotate(360deg); } }\n        @-webkit-keyframes spin { 100% { -webkit-transform: rotate(360deg); } }\n        @keyframes spin { 100% { -webkit-transform: rotate(360deg); transform:rotate(360deg); } }\n      </style>\n      <div style="padding:15px;background:#fff;border-radius:10px">\n        <section style="display: flex;justify-content: space-between;">\n          <section style="display: flex;justify-content: center;align-items: center;flex: 50% 0 0;font-size: 32px;line-height: 36px;text-align: center;letter-spacing: 12px;">'+t+'</section>\n          <section style="font-size: 14px;line-height: 20px;">\n            <div style="font-weight: bold">Verification Code</div>\n            <div style="margin-top: 4px">Does the code on your device match this one?</div>\n          </section>\n        </section>\n        <section style="display: flex;justify-content: center;margin-top: 12px">\n          <button ownid-btn="no" style="margin-right: 16px;">No</button>\n          <button ownid-btn="yes">Yes</button>\n        </section>\n      </div>\n      <div ownid-pending style="display:none; position: absolute;top: 0;background: rgba(255,255,255,.7);width: 100%;height: 100%;justify-content: center;align-items: flex-start;padding-top: 35px;">\n        <img style="width: 50px; height: 50px;-webkit-animation:spin 1.2s linear infinite;-moz-animation:spin 1.2s linear infinite;animation:spin 1.2s linear infinite;" src="data:image/png;base64,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cy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgZXhpZjpQaXhlbFhEaW1lbnNpb249IjcwIiBleGlmOlBpeGVsWURpbWVuc2lvbj0iNzAiIGV4aWY6VXNlckNvbW1lbnQ9IlNjcmVlbnNob3QiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTA1LTEyVDIxOjE2OjEyLTA3OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMC0wNS0xMlQyMToyMDozOS0wNzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMC0wNS0xMlQyMToyMDozOS0wNzowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJEaXNwbGF5IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmRhZTI5ZGM4LTlkODktNDUzYS1hOTU1LTU0ZDE2MjJmYzEyNiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpkYWUyOWRjOC05ZDg5LTQ1M2EtYTk1NS01NGQxNjIyZmMxMjYiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkYWUyOWRjOC05ZDg5LTQ1M2EtYTk1NS01NGQxNjIyZmMxMjYiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpkYWUyOWRjOC05ZDg5LTQ1M2EtYTk1NS01NGQxNjIyZmMxMjYiIHN0RXZ0OndoZW49IjIwMjAtMDUtMTJUMjE6MjA6MzktMDc6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFk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">\n      </div>',null!=(r=this.ref.querySelector('[ownid-btn="yes"]'))&&r.addEventListener("click",function(){return e()}),null!=(i=this.ref.querySelector('[ownid-btn="no"]'))&&i.addEventListener("click",function(){return n()}))},t.prototype.showPending=function(){var t=this.ref.querySelector("[ownid-pending]");t&&(t.style.display="flex")},t.prototype.generateQRCode=function(t){var e=qrcode_1(0,"L");return e.addData(t),e.make(),e.createImgTag(3,7)},t}(BaseCommonComponent);!function(t){t.Register="register",t.Login="login",t.Link="link",t.Recover="recover"}(WidgetType=WidgetType||{}),function(t){t.en="en",t.enGB="en-GB",t.enUS="en-US",t.ru="ru",t.es="es"}(Languages=Languages||{});var _a,ContextStatus,ConfigurationService=function(){function t(){}return t.URLPrefix="/ownid",t.statusUrl="/status",t.approveUrl="/:context/approve",t.statusTimeout=2e3,t.defaultLanguage=Languages.en,t}(),login={mobileTitle:"Instant Sign In",desktopTitle:"Instant Sign In",desktopSubtitle:"Use your phone to scan for passwordless sign in."},register={mobileTitle:"Register without a password",desktopTitle:"Skip the password with OwnID",desktopSubtitle:"Use your phone to scan and complete a passwordless registration."},link={mobileTitle:"Enable Instant Login",desktopTitle:"Enable Instant Login",desktopSubtitle:"Use your phone to scan for enabling passwordless sign in."},recover={mobileTitle:"Recover account without a password",desktopTitle:"Skip the password with OwnID",desktopSubtitle:"Use your phone to scan and complete a passwordless account recover."},en={login:login,register:register,link:link,recover:recover},login$1={mobileTitle:"Мгновенный вход",desktopTitle:"Мгновенный вход",desktopSubtitle:"Используйте свой телефон для сканирования и входа без пароля."},register$1={mobileTitle:"Зарегистрироваться без пароля",desktopTitle:"Пропустить пароль с OwnID",desktopSubtitle:"Используйте свой телефон для сканирования и завершения регистрации без пароля."},link$1={mobileTitle:"Включить мгновенный вход",desktopTitle:"Включить мгновенный вход",desktopSubtitle:"Используйте свой телефон для сканирования и включения входа без пароля."},recover$1={mobileTitle:"Восстановить аккаунт без пароля",desktopTitle:"Пропустить пароль с OwnID",desktopSubtitle:"Используйте свой телефон для сканирования и завершения востановления аккаунта без пароля."},ru={login:login$1,register:register$1,link:link$1,recover:recover$1},TranslationService=function(){function t(){}return t.texts=((_a={})[Languages.en]=en,_a[Languages.ru]=ru,_a),t}();!function(t){t[t.Initiated=1]="Initiated",t[t.Started=2]="Started",t[t.WaitingForApproval=3]="WaitingForApproval",t[t.Approved=4]="Approved",t[t.Declined=5]="Declined",t[t.Finished=99]="Finished"}(ContextStatus=ContextStatus||{});var LogLevel,WidgetComponent=function(o){function t(t,e,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1);var i=o.call(this,t)||this;return i.config=t,i.requestService=e,i.disableDesktop=n,i.disableMobile=r,i.contexts=[],i.widgetReady=i.init(t).then(function(){i.render(),i.setRefreshLinkOrQR(),i.isMobile()||i.setCallStatus()},function(t){console.error(t.message)}),i}return __extends(t,o),t.prototype.init=function(t){return this.getContext(t.URLPrefix||ConfigurationService.URLPrefix,t.data)},t.prototype.getContext=function(r,i){return void 0===i&&(i=null),__awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(t){switch(t.label){case 0:return e={type:this.config.type||WidgetType.Register,data:i,qr:!this.isMobile()},[4,this.requestService.post(r,e)];case 1:if(!(n=t.sent()))throw new Error("No context data received");return this.cacheExpiration=n.expiration,this.contexts.push(n),[2]}})})},t.prototype.render=function(){var t=this,e=this.config.language||ConfigurationService.defaultLanguage;if(this.isMobile()){if(this.disableMobile)return void console.warn("Mobile rendering is disabled for "+this.config.type+" widget type");var n=this.config.mobileTitle||TranslationService.texts[e][this.config.type].mobileTitle;this.link=new LinkButton({href:this.getStartUrl(),title:n}),this.link.attachHandler("click",function(){t.setCallStatus(),clearTimeout(t.refreshLinkTimeout),t.attachPostMessagesHandler()}),this.addChild(this.link)}else{if(this.disableDesktop)return void console.warn("Desktop rendering is disabled for "+this.config.type+" widget type");var r=this.config.desktopTitle||TranslationService.texts[e][this.config.type].desktopTitle,i=this.config.desktopTitle||TranslationService.texts[e][this.config.type].desktopSubtitle;this.qr=new Qr({href:this.getStartUrl(),title:r,subtitle:i}),this.addChild(this.qr)}},t.prototype.getStartUrl=function(){return this.contexts[this.contexts.length-1].url},t.prototype.getStatusUrl=function(){return""+(this.config.URLPrefix||ConfigurationService.URLPrefix).replace(/\/+$/,"")+ConfigurationService.statusUrl},t.prototype.getApproveUrl=function(t){return""+(this.config.URLPrefix||ConfigurationService.URLPrefix).replace(/\/+$/,"")+ConfigurationService.approveUrl.replace(":context",t)},t.prototype.setCallStatus=function(){var t=this;this.statusTimeout=window.setTimeout(function(){return t.callStatus()},this.config.statusInterval||ConfigurationService.statusTimeout)},t.prototype.callStatus=function(){return __awaiter(this,void 0,void 0,function(){var e,n,r,i,o,a,s,c,u,l,f,d,g,h=this;return __generator(this,function(t){switch(t.label){case 0:return e=this.contexts.map(function(t){return{context:t.context,nonce:t.nonce}}),[4,this.requestService.post(this.getStatusUrl(),e)];case 1:if(!(n=t.sent()))return[2,this.setCallStatus()];if(r=n.map(function(t){return t.status}),0<=(i=r.indexOf(ContextStatus.Finished)))switch(o=n[i].payload.Data,this.config.type){case WidgetType.Link:return[2,this.config.onLink&&this.config.onLink(o)];case WidgetType.Login:return[2,this.config.onLogin&&this.config.onLogin(o)];case WidgetType.Recover:return[2,this.config.onRecover&&this.config.onRecover(o)];case WidgetType.Register:default:return[2,this.config.onRegister&&this.config.onRegister(o)]}for(0<=r.indexOf(ContextStatus.Started)&&window.clearTimeout(this.refreshLinkTimeout),0<=(a=r.indexOf(ContextStatus.WaitingForApproval))&&(clearTimeout(this.refreshLinkTimeout),s=this.contexts[a],c=n[a].payload.pin,this.qr&&(u=function(){var t;h.sendApprove(!0,s),null!==(t=h.qr)&&void 0!==t&&t.showPending()},l=function(){var t;h.sendApprove(!1,s),null!==(t=h.qr)&&void 0!==t&&t.showPending(),h.reCreateWidget()},this.qr.showSecurityCheck(c,u,l))),f=function(t){var e=d.contexts[t];n.findIndex(function(t){return t.context===e.context})<0&&d.contexts.splice(t,1)},g=(d=this).contexts.length;g--;)f(g);return[2,this.setCallStatus()]}})})},t.prototype.sendApprove=function(t,e){var n=e.context,r=e.nonce;this.requestService.post(this.getApproveUrl(n),{context:n,nonce:r,approved:t})},t.prototype.setRefreshLinkOrQR=function(){var t=this;this.cacheExpiration&&(this.refreshLinkTimeout=window.setTimeout(function(){return t.refreshLinkOrQR()},this.cacheExpiration/2))},t.prototype.refreshLinkOrQR=function(){var t=this;this.init(this.config).then(function(){t.qr?t.qr.update(t.getStartUrl()):t.link&&t.link.update(t.getStartUrl()),t.setRefreshLinkOrQR()},function(t){console.error(t.message)})},t.prototype.destroy=function(){clearTimeout(this.statusTimeout),clearTimeout(this.refreshLinkTimeout),this.elements.forEach(function(t){return t.destroy()})},t.prototype.update=function(t){this.elements.forEach(function(t){return t.destroy()}),this.config=__assign(__assign({},this.config),t),this.render()},t.prototype.attachPostMessagesHandler=function(){var e=this;window.addEventListener("message",function(t){"ownid postMessages enabled"===t.data&&clearTimeout(e.statusTimeout),"ownid success"===t.data&&e.callStatus()},!1)},t.prototype.reCreateWidget=function(){var t=this;this.widgetReady=this.init(this.config).then(function(){t.destroy(),t.render(),t.setRefreshLinkOrQR(),t.isMobile()||t.setCallStatus()})},t}(BaseComponent),RequestService=function(){function t(t){this.logger=t}return t.prototype.post=function(n,r){var i;return void 0===r&&(r={}),__awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return null!==(i=this.logger)&&void 0!==i&&i.logInfo("request: "+n),[4,fetch(n,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(r)})];case 1:return 200===(e=t.sent()).status?[2,e.json()]:[2,null]}})})},t}(),GigyaLinkWidgetComponent=function(r){function t(t,e){var n=r.call(this,t,e)||this;return n.config=t,n.requestService=e,n}return __extends(t,r),t.prototype.init=function(o){var t=this;return new Promise(function(r,i){window.gigya.accounts.getJWT({callback:function(n){return __awaiter(t,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return 0!==n.errorCode&&(e="Gigya.GetJWT -> "+n.errorCode+": "+n.errorMessage,console.error(e),i(new Error(e))),[4,this.getContext(o.URLPrefix||ConfigurationService.URLPrefix,{jwt:n.id_token})];case 1:return t.sent(),r(),[2]}})})}})})},t}(WidgetComponent);!function(t){t[t.debug=1]="debug",t[t.info=2]="info",t[t.error=3]="error"}(LogLevel=LogLevel||{});var LoggerDecorator=function(){function t(t,e){this.externalLogger=t,this.logLevel=e}return t.prototype.logDebug=function(t){this.logLevel>LogLevel.debug||this.externalLogger.logDebug(t)},t.prototype.logInfo=function(t){this.logLevel>LogLevel.info||this.externalLogger.logInfo(t)},t.prototype.logError=function(t){this.externalLogger.logError(t)},t}(),OwnIDUiSdk=function(){function t(){this.config={},this.isGigyaAdded=!1}return t.prototype.init=function(t){var e;void 0===t&&(t={}),(this.config=t).logger&&(e=t.logLevel?LogLevel[t.logLevel]:LogLevel.error,this.config.logger=new LoggerDecorator(t.logger,e))},t.prototype.render=function(t){if(!t.element)return console.error("Parent element wasn't found on the page"),null;var e=t.type===WidgetType.Link;return new WidgetComponent(__assign(__assign({},this.config),t),new RequestService(this.config.logger),e,!1)},t.prototype.renderLinkGigya=function(a,s){return __awaiter(this,void 0,void 0,function(){var i,o=this;return __generator(this,function(t){return a.element?(i=window.gigya,s||i?[2,new Promise(function(t){function e(){t(new GigyaLinkWidgetComponent(__assign(__assign({},o.config),a),new RequestService))}var n,r;o.isGigyaAdded||i?e():(o.isGigyaAdded=!0,n="https://cdns.gigya.com/js/gigya.js?apikey="+s,(r=document.createElement("script")).src=n,r.addEventListener("load",e),document.head.append(r))})]:(console.error("Gigya apiKey should be provided"),[2,null])):(console.error("Parent element wasn't found on the page"),[2,null])})})},t}();window.ownid=window.ownid instanceof OwnIDUiSdk?window.ownid:new OwnIDUiSdk,window.ownidAsyncInit?window.ownidAsyncInit():console.log("ownid sdk is not initialized, ownidAsyncInit fucntion was not found");
//# sourceMappingURL=ownid-web-ui-sdk.es5.js.map
